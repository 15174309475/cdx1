<!DOCTYPE html>
<html>
<head>
    <title>宇宙成因核素产率计算器</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .input-group { margin: 10px 0; }
        input { margin-left: 5px; width: 120px; }
        .result { margin-top: 20px; font-weight: bold; }
        button { 
            padding: 8px 16px; 
            margin-top: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h2>宇宙成因核素产率计算器</h2>
    <div class="input-group">
        纬度（度）: <input type="number" id="latitude" placeholder="输入纬度">
    </div>
    <div class="input-group">
        海拔（米）: <input type="number" id="elevation" placeholder="输入海拔">
    </div>
    <div class="input-group">
        深度（厘米）: <input type="number" id="depth" placeholder="输入深度">
    </div>
    <button onclick="calculate()">计算产率</button>
    <div id="results" class="result"></div>

    <script>
        // 标称产率（SLHL: 海平面高纬度）
        const P0 = {
            '10Be': 6,    // atoms/g/yr
            '26Al': 36.8,
            '14C': 20,
            '3He': 124,
            '21Ne': 21,
            '36Cl': 54
        };

        // 输入验证函数
        function getInputValue(id) {
            const value = parseFloat(document.getElementById(id).value);
            return isNaN(value) ? 0 : value; // 空输入默认为0
        }

        // 海拔校正因子（每千米增加15%）
        function elevationFactor(elevation) {
            return 1 + 0.15 * (elevation / 1000);
        }

        // 纬度校正因子（Dorman函数模型）
        function latitudeFactor(lat) {
            const alpha = 10.275;
            const k = 0.9615;
            const latRad = Math.abs(lat) * Math.PI / 180; // 绝对纬度值
            const R_C = 14.9 * Math.pow(Math.cos(latRad), 4);
            return R_C <= 0 ? 1.0 : 1 - Math.exp(-alpha * Math.pow(R_C, -k));
        }

        // 深度衰减因子（衰减长度150 g/cm²）
        function depthAttenuation(depth) {
            const L = 150;   // 衰减长度
            const density = 2.7; // 岩石密度
            return Math.exp(-(depth * density) / L);
        }

        function calculate() {
            const lat = getInputValue('latitude');
            const elev = getInputValue('elevation');
            const depth = getInputValue('depth');

            let results = "<h3>校正后产率（atoms/g/yr）:</h3>";
            for (const nuclide in P0) {
                let rate = P0[nuclide] * elevationFactor(elev) 
                          * latitudeFactor(lat) 
                          * depthAttenuation(depth);
                
                results += `<span style="color: #2c3e50;">${nuclide.padEnd(4, ' ')}</span>: 
                           ${rate.toFixed(2)}<br>`;
            }
            document.getElementById('results').innerHTML = results;
        }
    </script>
</body>
</html>
